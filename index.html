<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Kh√°m Ph√° B·∫£n Th√¢n</title>

  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      overflow: hidden;
    }

    #bgVideo {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      transform: translate(-50%, -50%);
      z-index: -1;
      filter: brightness(0.6);
    }

    h1 {
      font-size: 2em;
      font-weight: bold;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
      margin-bottom: 20px;
      animation: fadeIn 1s ease;
    }

    button, .option-btn {
      background: rgba(0, 153, 255, 0.9);
      color: white;
      border: none;
      border-radius: 30px;
      padding: 14px 28px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      margin: 10px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: 0.3s;
      animation: fadeIn 1s ease;
    }

    button:hover, .option-btn:hover {
      background: rgba(0,128,255,1);
      transform: scale(1.05);
    }

    textarea {
      width: 80%;
      max-width: 400px;
      border-radius: 10px;
      border: none;
      padding: 10px;
      font-size: 1em;
      resize: none;
      margin: 15px auto;
      display: block;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      animation: fadeIn 1s ease;
    }

    input[type="checkbox"] {
      transform: scale(1.3);
      margin-right: 10px;
    }

    .error {
      color: #ffddcc;
      text-shadow: 1px 1px 3px black;
      font-weight: bold;
      animation: shake 0.3s;
    }

    .result-img {
      width: 200px;
      border-radius: 15px;
      margin: 15px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.4);
      animation: fadeIn 1s ease;
    }

    #unmuteBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 10px 20px;
      font-size: 14px;
      z-index: 1000;
      cursor: pointer;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.3em; }
      button, .option-btn { width: 90%; font-size: 0.9em; }
      textarea { width: 90%; font-size: 0.9em; }
      .result-img { width: 140px; }
    }
  </style>
</head>

<body>
  <video autoplay muted loop playsinline id="bgVideo">
    <source src="videos/background.mp4" type="video/mp4">
  </video>

  <audio id="bgMusic" src="sounds/background.mp3" loop preload="auto"></audio>
  <button id="unmuteBtn">üîä B·∫≠t ti·∫øng</button>

  <div id="app">
    <h1>üåü H√£y c√πng nhau kh√°m ph√° b·∫£n th√¢n th√¥i n√†o! üåü</h1>
    <button onclick="startQuiz()">Kh√°m ph√° ngay üöÄ</button>
  </div>

  <audio id="clickSound" src="sounds/click.mp3" preload="auto"></audio>

  <script>
    const bgMusic = document.getElementById("bgMusic");
    const unmuteBtn = document.getElementById("unmuteBtn");
    const clickSound = document.getElementById("clickSound");

    unmuteBtn.addEventListener("click", () => {
      bgMusic.volume = 0.5;
      bgMusic.play().catch(() => {});
      unmuteBtn.style.display = "none";
    });

    function playClickSound() {
      clickSound.currentTime = 0;
      clickSound.play().catch(() => {});
    }
    document.addEventListener("click", playClickSound);

    document.addEventListener("touchstart", () => {
      bgMusic.play().then(() => {
        bgMusic.pause();
        bgMusic.currentTime = 0;
      }).catch(()=>{});
    }, { once: true });

    const app = document.getElementById("app");

    const questions = [
      { text: "Khi l·ªõp c√≥ m·ªôt d·ª± √°n 'kh√≥ nh·∫±n', b·∫°n s·∫Ω xung phong l√†m ph·∫ßn n√†o?",
        options: ["L√™n k·∫ø ho·∫°ch, ph√¢n c√¥ng, 'ch·ªët deal' v·ªõi c√¥ gi√°o.",
                  "Ng·ªìi l√†m slide, thi·∫øt k·∫ø poster, ch·ªânh video.",
                  "L·∫Øp r√°p m√¥ h√¨nh, lo ph·∫ßn k·ªπ thu·∫≠t, m√°y m√≥c."],
        group: ["L√£nh ƒê·∫°o", "S√°ng T·∫°o", "K·ªπ Thu·∫≠t"] },
      { text: "N·∫øu m√°y t√≠nh/ƒëi·ªán tho·∫°i ƒë·ªôt nhi√™n 'd·ªü ch·ª©ng', ph·∫£n ·ª©ng ƒë·∫ßu ti√™n c·ªßa b·∫°n l√†:",
        options: ["M·ªü m√°y ra th·ª≠ s·ª≠a.", "Tra Google ƒë·ªÉ hi·ªÉu nguy√™n nh√¢n.", "G·ªçi b·∫°n m√¥ t·∫£ 'b·ªánh' chi ti·∫øt."],
        group: ["K·ªπ Thu·∫≠t", "H·ªçc Thu·∫≠t", "Ng√¥n Ng·ªØ"] },
      { text: "L·ªõp t·ªï ch·ª©c ƒëi c·∫Øm tr·∫°i, b·∫°n s·∫Ω l√† ai trong chuy·∫øn ƒëi?",
        options: ["S·∫øp t·ªïng lo ng√¢n s√°ch, ch·ªët ƒë·ªãa ƒëi·ªÉm.", "Mama t·ªïng qu·∫£n lo ƒë·ªì ƒÉn v√† tinh th·∫ßn.", "C√¢y vƒÉn ngh·ªá t·ªï ch·ª©c tr√≤ ch∆°i."],
        group: ["L√£nh ƒê·∫°o", "X√£ H·ªôi", "S√°ng T·∫°o"] },
      { text: "C√°ch h·ªçc n√†o khi·∫øn b·∫°n th·∫•y 'v√†o' nh·∫•t?",
        options: ["Th·∫£o lu·∫≠n, thuy·∫øt tr√¨nh, tranh lu·∫≠n.", "ƒê·ªçc t√†i li·ªáu, l√†m vi·ªác v·ªõi con s·ªë.", "Ho·∫°t ƒë·ªông x√£ h·ªôi, gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c."],
        group: ["Ng√¥n Ng·ªØ", "H·ªçc Thu·∫≠t", "X√£ H·ªôi"] },
      { text: "B·∫°n b√® th∆∞·ªùng t√¨m ƒë·∫øn b·∫°n khi n√†o?",
        options: ["C·∫ßn ng∆∞·ªùi l·∫Øng nghe, cho l·ªùi khuy√™n.", "Nh·ªù l√†m MC, vi·∫øt content, d·ªãch ti·∫øng Anh.", "Nh·ªù gi·∫£i b√†i to√°n logic, thu·∫≠t to√°n."],
        group: ["X√£ H·ªôi", "Ng√¥n Ng·ªØ", "H·ªçc Thu·∫≠t"] },
      { text: "Vi·ªác 'ng∆∞·ªùi l·ªõn' n√†o nghe c√≥ v·∫ª th√∫ v·ªã nh·∫•t?",
        options: ["T·ª± tay s·ª≠a ƒë·ªì ƒëi·ªán t·ª≠.", "L·∫≠p k·∫ø ho·∫°ch kinh doanh.", "V·∫Ω, ph·ªëi m√†u cho cƒÉn ph√≤ng."],
        group: ["K·ªπ Thu·∫≠t", "L√£nh ƒê·∫°o", "S√°ng T·∫°o"] },
      { text: "M·ªôt ng√†y ƒë·∫πp tr·ªùi, b·∫°n s·∫Ω:",
        options: ["C√†y phim khoa h·ªçc, gi·∫£i ƒë·ªÅ logic.", "ƒêi t√¨nh nguy·ªán ho·∫∑c t·ªï ch·ª©c workshop.", "V·∫Ω, vi·∫øt truy·ªán, thu √¢m."],
        group: ["H·ªçc Thu·∫≠t", "X√£ H·ªôi", "S√°ng T·∫°o"] },
      { text: "B·∫°n c·∫£m th·∫•y 'oai' nh·∫•t khi...",
        options: ["ƒêi·ªÅu ph·ªëi s·ª± ki·ªán l·ªõn c·ªßa tr∆∞·ªùng.", "T·ª± tay s·ª≠a ƒë·ªì ph·ª©c t·∫°p.", "Tranh lu·∫≠n th·∫Øng ai ƒë√≥."],
        group: ["L√£nh ƒê·∫°o", "K·ªπ Thu·∫≠t", "Ng√¥n Ng·ªØ"] },
      { text: "Khi xem phim, b·∫°n ch√∫ √Ω nh·∫•t ƒë·∫øn:",
        options: ["L·ªùi tho·∫°i v√† c√°ch nh√¢n v·∫≠t thuy·∫øt ph·ª•c.", "M√†u s·∫Øc, g√≥c quay, trang ph·ª•c.", "M·ªëi quan h·ªá v√† t√¢m l√Ω nh√¢n v·∫≠t."],
        group: ["Ng√¥n Ng·ªØ", "S√°ng T·∫°o", "X√£ H·ªôi"] },
      { text: "B·∫°n ƒë∆∞·ª£c giao nhi·ªám v·ª• 'n√¢ng c·∫•p' ph√≤ng h·ªçc. B·∫°n s·∫Ω:",
        options: ["V·∫Ω t∆∞·ªùng graffiti, s·∫Øp x·∫øp l·∫°i m√†u s·∫Øc.", "T√≠nh to√°n ng√¢n s√°ch, ph√¢n c√¥ng.", "S·ª≠a qu·∫°t, ƒë√≥ng b√†n."],
        group: ["S√°ng T·∫°o", "L√£nh ƒê·∫°o", "K·ªπ Thu·∫≠t"] },
    ];

    const qualities = [
      "T√¥i c√≥ tinh th·∫ßn tr√°ch nhi·ªám cao, lu√¥n ho√†n th√†nh vi·ªác ƒë∆∞·ª£c giao.",
      "T√¥i trung th·ª±c, ƒë√°ng tin c·∫≠y v√† tu√¢n th·ªß nguy√™n t·∫Øc.",
      "T√¥i ki√™n tr√¨, kh√¥ng b·ªè cu·ªôc d√π g·∫∑p kh√≥ khƒÉn.",
      "T√¥i linh ho·∫°t, s√°ng t·∫°o v√† th√≠ch h·ªçc h·ªèi c√°i m·ªõi.",
      "T√¥i l√†m vi·ªác c√≥ k·∫ø ho·∫°ch, ƒë√∫ng gi·ªù, v√† bi·∫øt qu·∫£n l√Ω th·ªùi gian.",
      "T√¥i t·ª± tin, d√°m th·ªÉ hi·ªán b·∫£n th√¢n v√† b·∫£o v·ªá quan ƒëi·ªÉm."
    ];

    let currentQuestion = 0;
    let answers = [];
    let selectedOption = null;
    let selectedQualities = [];

    function startQuiz() {
      currentQuestion = 0;
      answers = [];
      selectedQualities = [];
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentQuestion];
      app.innerHTML = `
        <h1>${q.text}</h1>
        ${q.options.map((opt, i) => `<button class="option-btn" onclick="selectOption(${i})">${opt}</button>`).join("")}
      `;
    }

    function selectOption(index) {
      selectedOption = index;
      submitAnswer(); // Kh√¥ng c√≤n h·ªèi l√Ω do gi·ªØa ch·ª´ng
    }

    function submitAnswer() {
      answers.push({
        question: questions[currentQuestion].text,
        answer: questions[currentQuestion].options[selectedOption],
        group: questions[currentQuestion].group[selectedOption]
      });

      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        showQuestion();
      } else {
        showQualities();
      }
    }

    function showQualities() {
      app.innerHTML = `
        <h1>Tuy·ªát v·ªùi! Gi·ªù h√£y ch·ªçn c√°c ph·∫©m ch·∫•t m√† b·∫°n th·∫•y ƒë√∫ng nh·∫•t v·ªõi m√¨nh nh√©:</h1>
        ${qualities.map((q, i) => `
          <div>
            <label>
              <input type="checkbox" value="${q}" />
              ${q}
            </label>
          </div>
        `).join("")}
        <button onclick="submitQualities()">üëâ Ti·∫øp t·ª•c</button>
      `;
    }

    function submitQualities() {
      selectedQualities = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
      if (selectedQualities.length === 0) {
        app.innerHTML += `<div class="error">ü•¥ H√£y ch·ªçn √≠t nh·∫•t m·ªôt ph·∫©m ch·∫•t!</div>`;
        return;
      }
      app.innerHTML = `
        <h1>T·∫°i sao b·∫°n nghƒ© m√¨nh c√≥ nh·ªØng ph·∫©m ch·∫•t ƒë√≥?</h1>
        <textarea id="qualityReason" placeholder="Chia s·∫ª suy nghƒ© c·ªßa b·∫°n..."></textarea>
        <div id="error" class="error"></div>
        <button onclick="showResult()">üëâ Xem k·∫øt qu·∫£</button>
      `;
    }

    function showResult() {
      const reason = document.getElementById("qualityReason").value.trim();
      if (reason === "") {
        document.getElementById("error").innerHTML = "H√£y nh·∫≠p l√Ω do tr∆∞·ªõc khi xem k·∫øt qu·∫£!";
        return;
      }

      const counts = {};
      for (const ans of answers) counts[ans.group] = (counts[ans.group] || 0) + 1;
      const bestGroup = Object.keys(counts).reduce((a,b) => counts[a] > counts[b] ? a : b);

      const careers = {
        "H·ªçc Thu·∫≠t": { 
          name: "Nh√† nghi√™n c·ª©u üß†, Ph√¢n t√≠ch d·ªØ li·ªáu üìä, L·∫≠p tr√¨nh vi√™n üë®‚Äçüíª,...", 
          img: ["images/scientist.png", "images/researcher.png","images/Software developer.png" ]},
        "Ng√¥n Ng·ªØ": { 
          name: "Nh√† b√°o üì∞, Bi√™n t·∫≠p vi√™n ‚úçÔ∏è, Marketing üìà, Ngo·∫°i ng·ªØ üî§,...", 
          img: ["images/writer.png", "images/journalist.png", "images/Marketing.png", "images/Language.png"] },
        "X√£ H·ªôi": { 
          name: "Nh√† t√¢m l√Ω h·ªçc üí¨, Gi√°o vi√™n üë©‚Äçüè´, B√°c sƒ© ü©∫,...", 
          img: ["images/Psychologist.png", "images/teacher.png","images/doctor.png" ] },
        "S√°ng T·∫°o": { 
          name: "Thi·∫øt k·∫ø ƒë·ªì h·ªça üé®, √Çm nh·∫°c üé§, Th·ªùi trang üëó,...", 
          img: ["images/artist.png", "images/Music.png", "images/fashion.png" ]},
        "K·ªπ Thu·∫≠t": { 
          name: "K·ªπ s∆∞ ‚öôÔ∏è, L·∫≠p tr√¨nh vi√™n üë®‚Äçüíª, C∆° kh√≠ üõ†Ô∏è, X√¢y d·ª±ng üèóÔ∏è,...", 
          img: ["images/engineer.png","images/Software developer.png", "images/Mechanical.png", "images/Construction.png"] },
        "L√£nh ƒê·∫°o": { 
          name: "Lu·∫≠t ‚öñÔ∏è, Doanh nh√¢n üíº, Ch√≠nh tr·ªã h·ªçc üèõÔ∏è, Qu·∫£n l√≠ c√¥ng üìã,...", 
          img: ["images/Lawyer.png", "images/Entrepreneur.png", "images/Political.png", "images/Administrator.png" ]}
      };

      const result = careers[bestGroup];
      const allImages = result.img.map(src => `<img src="${src}" class="result-img" alt="${bestGroup}" />`).join("");

      app.innerHTML = `
        <h1>B·∫°n c√≥ nƒÉng l·ª±c n·ªïi tr·ªôi v·ªÅ <span style="color:#ffeb3b;">${bestGroup}</span> üí™</h1>
        <p>Ng√†nh ngh·ªÅ ph√π h·ª£p: <b>${result.name}</b></p>
        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:15px;">
          ${allImages}
        </div>
        <button onclick="restart()">üîÅ L√†m l·∫°i</button>
      `;
    }

    function restart() {
      startQuiz();
    }
  </script>
</body>
</html>
